<div class="flex align-items-center gap-4 mb-4">
  <div class="p-input-icon-left w-full">
    <i class="pi pi-search"></i>
    <input
      type="text"
      pInputText
      class="w-full"
      (change)="setTitleFilter($event)"
    />
  </div>
  <p-button
    label="Szukaj"
    size="large"
    icon="pi pi-search"
    (click)="filterBooks()"
  ></p-button>
</div>
<div class="flex w-full gap-4 h-full">
  <div class="w-full max-w-24rem hidden xl:flex flex-column">
    <form [formGroup]="formGroup" class="flex flex-column gap-4">
      <div
        class="overflow-y-auto flex flex-column gap-4 filter-container sticky top-0"
      >
        <div class="flex flex-column gap-2">
          <h3 class="text-lg m-0 text-center">Tagi</h3>
          <p-listbox
            [options]="tags"
            optionLabel="name"
            optionValue="value"
            formControlName="selectedTags"
            [filter]="true"
            [checkbox]="true"
            [multiple]="true"
            [listStyle]="{ 'max-height': '13rem', height: '13rem' }"
            (onChange)="onChangeTagFilter($event)"
          />
        </div>
        <div class="flex flex-column gap-2">
          <h3 class="text-lg m-0 text-center">Kategorie</h3>
          <p-listbox
            [options]="categories()"
            optionLabel="name"
            formControlName="selectedCategories"
            [filter]="true"
            [checkbox]="true"
            [multiple]="true"
            [listStyle]="{ 'max-height': '44.5rem', height: '44.5rem' }"
            (onChange)="onChangeCategoryFilter($event)"
          />
        </div>
      </div>
      <p-button
        label="Filtruj"
        class="w-full"
        styleClass="p-button-secondary"
        (onClick)="filterBooks()"
      ></p-button>
    </form>
  </div>
  <div class="grid-auto-fit">
    @if (status() === 'loading') { @for (_ of skeletons; track $index) {
    <lib-skeleton />
    } } @else if (status() === 'ok') {@for (book of books(); track book.id) {
    <p-card
      [header]="book.title"
      [style]="{ width: '100%', maxWidth: '34rem' }"
    >
      <ng-template pTemplate="header">
        <img
          alt="Card"
          [src]="
            book.coverImage
              ? book.coverImage
              : 'https://primefaces.org/cdn/primeng/images/usercard.png'
          "
        />
      </ng-template>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed
        consequuntur error repudiandae numquam deserunt quisquam repellat libero
        asperiores earum nam nobis, culpa ratione quam perferendis esse,
        cupiditate neque quas!
      </p>

      <ng-template pTemplate="footer">
        <p-button
          class="flex justify-content-end"
          label="Dodaj to koszyka"
          icon="pi pi-cart-plus"
        ></p-button>
        <!-- <p-button -->
        <!--   label="Cancel" -->
        <!--   icon="pi pi-times" -->
        <!--   styleClass="p-button-secondary" -->
        <!--   [style]="{ 'margin-left': '.5em' }" -->
        <!-- ></p-button> -->
      </ng-template>
    </p-card>
    } @empty {
    <div>No data to display!</div>
    }}
  </div>
</div>
