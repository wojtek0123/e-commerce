<div
  class="hidden xl:block sticky top-4 h-content rounded-base overflow-y-auto w-full"
>
  <div class="min-h-min max-w-96 w-full rounded-base overflow-hidden">
    <ng-container [ngTemplateOutlet]="filters" />
  </div>
</div>

<p-button
  severity="secondary"
  size="large"
  class="xl:hidden"
  [plain]="true"
  icon="pi pi-bars"
  (onClick)="isSidebarVisible.set(true)"
/>

<p-drawer libDrawerLeft class="xl:hidden" [(visible)]="isSidebarVisible">
  @if (isSidebarVisible()) {
    <ng-container [ngTemplateOutlet]="filters" />
  }
</p-drawer>

<ng-template #filters>
  <p-accordion>
    <p-accordion-panel [value]="0">
      <p-accordion-header>
        <lib-accordion-filter-header
          header="Tags"
          [selectedItemsCount]="selectedTags().length"
          (onClearFilter)="clearSelectedItems('tag')"
        />
      </p-accordion-header>
      <p-accordion-content>
        <lib-filter libTags />
      </p-accordion-content>
    </p-accordion-panel>
    <p-accordion-panel [value]="1">
      <p-accordion-header>
        <lib-accordion-filter-header
          header="Authors"
          [selectedItemsCount]="selectedAuthors().length"
          (onClearFilter)="clearSelectedItems('author')"
        />
      </p-accordion-header>
      <p-accordion-content>
        <lib-filter libAuthors />
      </p-accordion-content>
    </p-accordion-panel>
    <p-accordion-panel [value]="2">
      <p-accordion-header>
        <lib-accordion-filter-header
          header="Categories"
          [selectedItemsCount]="selectedCategories().length"
          (onClearFilter)="clearSelectedItems('category')"
        />
      </p-accordion-header>
      <p-accordion-content>
        <lib-filter libCategories />
      </p-accordion-content>
    </p-accordion-panel>
    <p-accordion-panel [value]="3">
      <p-accordion-header>
        <lib-accordion-filter-header
          header="Price"
          [selectedItemsCount]="selectedPrices().length"
          (onClearFilter)="clearPriceFilter()"
        />
      </p-accordion-header>
      <p-accordion-content>
        <lib-price-filter />
      </p-accordion-content>
    </p-accordion-panel>
  </p-accordion>
</ng-template>
