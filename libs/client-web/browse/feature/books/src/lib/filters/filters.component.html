<div
  class="hidden xl:block sticky top-8 h-content rounded-base overflow-y-auto w-full"
>
  <div class="min-h-min rounded-base overflow-hidden">
    <ng-container [ngTemplateOutlet]="filters" />
  </div>
</div>

<p-button
  severity="secondary"
  size="large"
  class="xl:hidden"
  [plain]="true"
  icon="pi pi-bars"
  (onClick)="sidebarVisible.set(true)"
/>

<p-sidebar
  [(visible)]="sidebarVisible"
  appendTo="body"
  position="right"
  [blockScroll]="true"
  class="xl:hidden"
>
  <ng-container [ngTemplateOutlet]="filters" />
</p-sidebar>

<ng-template #filters>
  <p-accordion>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <lib-accordion-filter-header
          header="Tags"
          [selectedItemsCount]="selectedTags().length"
          (clearSelectedItems)="clearSelectedItems('tag')"
        />
      </ng-template>
      <lib-filter libTags />
    </p-accordionTab>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <lib-accordion-filter-header
          header="Authors"
          [selectedItemsCount]="selectedAuthors().length"
          (clearSelectedItems)="clearSelectedItems('author')"
        />
      </ng-template>
      <lib-filter libAuthors />
    </p-accordionTab>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <lib-accordion-filter-header
          header="Categories"
          [selectedItemsCount]="selectedCategories().length"
          (clearSelectedItems)="clearSelectedItems('category')"
        />
      </ng-template>
      <lib-filter libCategories />
    </p-accordionTab>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <lib-accordion-filter-header
          header="Price"
          [selectedItemsCount]="selectedPrices().length"
          (clearSelectedItems)="clearSelectedItems('price')"
        />
      </ng-template>
      <lib-price-filter />
    </p-accordionTab>
  </p-accordion>
</ng-template>
