<form [formGroup]="form" (ngSubmit)="submit()" class="flex flex-col gap-4">
  <lib-form-field>
    @let cardNumberControl = form.controls.cardNumber;
    <lib-label idFor="card-number">Cart number</lib-label>
    <p-inputmask
      slot="input"
      mask="9999 9999 9999 9999"
      id="card-number"
      styleClass="w-full"
      formControlName="cardNumber"
      placeholder="Type your card number"
    />
    @if (cardNumberControl.invalid && cardNumberControl.dirty) {
      <p-message libErrorMessage>Card number is required</p-message>
    }
  </lib-form-field>

  <div class="grid grid-cols-2 gap-4">
    <lib-form-field>
      @let expirationDateControl = form.controls.expirationDate;
      <lib-label idFor="expiration-date">Expiration date</lib-label>
      <p-inputmask
        slot="input"
        mask="99/9999"
        id="expiration-date"
        styleClass="w-full"
        formControlName="expirationDate"
        placeholder="Type expiration date"
      />
      @if (expirationDateControl.invalid && expirationDateControl.dirty) {
        <p-message libErrorMessage>Expiration date is required</p-message>
      }
    </lib-form-field>

    <lib-form-field>
      @let securityCodeControl = this.form.controls.securityCode;
      <lib-label idFor="security-code">Security code</lib-label>
      <p-inputmask
        slot="input"
        mask="999"
        id="security-code"
        styleClass="w-full"
        formControlName="securityCode"
        placeholder="Type security code"
      />
      @if (securityCodeControl.invalid && securityCodeControl.dirty) {
        <p-message libErrorMessage>Security code is required</p-message>
      }
    </lib-form-field>
  </div>

  <div class="grid grid-cols-2 gap-4 mt-4">
    <p-button
      severity="secondary"
      [outlined]="true"
      (onClick)="hideCreditCardForm()"
      label="Cancel"
      styleClass="w-full"
    />
    <p-button
      severity="secondary"
      styleClass="w-full"
      label="Save"
      type="submit"
    />
  </div>
</form>
