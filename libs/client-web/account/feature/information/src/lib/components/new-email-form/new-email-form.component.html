<form
  class="flex flex-col gap-2 bg-content-background p-4 rounded-base"
  [formGroup]="form"
  (ngSubmit)="submit()"
>
  <lib-form-field label="Current email">
    <input pInputText slot="input" [value]="userEmail()" [disabled]="true" />
  </lib-form-field>

  <lib-form-field label="New email" [isRequired]="true">
    <input pInputText slot="input" [email]="true" formControlName="email" />
    @if (form.controls.email.invalid && form.controls.email.dirty) {
      <lib-error-message message="Enter valid email" />
    }
  </lib-form-field>

  <lib-form-field label="Password to confirm" [isRequired]="true">
    <p-password
      slot="input"
      formControlName="password"
      [fluid]="true"
      [toggleMask]="true"
      [feedback]="false"
    />
    @if (form.controls.password.invalid && form.controls.password.dirty) {
      <lib-error-message />
    }
  </lib-form-field>

  <div class="grid grid-cols-2 gap-4 mt-4">
    <p-button
      [outlined]="true"
      styleClass="w-full"
      label="Cancel"
      (onClick)="setEditingField(null)"
    />
    <p-button
      type="submit"
      severity="secondary"
      styleClass="w-full"
      label="Save"
      [loading]="loading()"
    />
  </div>
</form>
